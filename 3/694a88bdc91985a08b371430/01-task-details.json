{
  "taskId": 3,
  "name": "make street address non mandatory in registration page",
  "createdAt": "2025-12-23T12:18:48.000Z",
  "updatedAt": "2025-12-23T12:18:48.000Z",
  "allAssignees": [
    "PrasanKumar93"
  ],
  "assignee": "PrasanKumar93",
  "taskStatus": "TODO",
  "taskCategory": "",
  "priority": "",
  "llmTaskExplanation": "Update the user registration page so the Street Address field is optional (non-mandatory) for all users/regions. Implement the change end-to-end so users can submit the registration form without providing a street address, and the backend (if it currently requires the field) accepts missing/empty street address without validation errors. Update shared validation schemas, form UI required indicators (remove asterisk/required marker), error messages, and API payload construction so that omitting street address does not block registration. Ensure existing behavior remains unchanged for other required fields and that street address is still saved when provided. When omitted, storing null or empty string is acceptable per existing conventions.",
  "validations": [
    "Registration form can be submitted when Street Address is empty/null/undefined (no client-side required validation triggered).",
    "Street Address required indicator (e.g., asterisk) is removed and helper/error text does not imply it is required.",
    "Street Address is optional for all user types/regions/countries (no conditional requirement by locale).",
    "If Street Address is provided, it must still pass existing format constraints (e.g., max length, allowed characters) as currently implemented.",
    "Backend validation (request DTO/schema) does not reject missing Street Address; it should accept absent field or empty string per existing conventions.",
    "If Street Address is omitted, the stored user profile/address record should either store null/empty or omit the field without causing errors downstream.",
    "No regression: other required registration fields remain required and still show validation errors when missing.",
    "Edge case: Street Address containing only whitespace is treated as empty (either trimmed to empty and accepted, or validated consistently with existing trimming rules)."
  ],
  "unitTests": [
    "Frontend: submitting registration with all required fields filled except Street Address succeeds (no validation error shown for Street Address).",
    "Frontend: Street Address field does not render a required marker and does not show 'required' error on blur when empty.",
    "Frontend: Street Address is optional regardless of selected country/region/user type (no conditional required behavior).",
    "Frontend: if Street Address is provided, existing validation rules still apply (e.g., too long triggers error).",
    "Frontend: Street Address with only whitespace is treated as empty and does not block submission.",
    "Backend: registration endpoint accepts payload without Street Address field and returns success response.",
    "Backend: registration endpoint accepts payload with Street Address as empty string and returns success (or normalizes to null) according to existing conventions.",
    "Backend: other required fields missing still return validation errors (regression test).",
    "Integration (if present): end-to-end registration flow works with Street Address omitted and user record is created."
  ],
  "acceptanceCriteria": [
    "Given I am on the registration page, when I leave Street Address blank and fill all other required fields, then I can successfully submit the form and create an account.",
    "Given I am on the registration page, when Street Address is blank, then the Street Address field is not marked as required and no 'Street Address is required' validation message is shown.",
    "Given I am registering from any country/region/user type, when I leave Street Address blank, then I can still successfully register (Street Address is optional for all).",
    "Given I enter a Street Address, when it violates existing constraints (e.g., exceeds max length), then I see the appropriate validation error and cannot submit until corrected.",
    "Given the registration API receives a request without Street Address, when it validates the request, then it does not reject the request due to missing Street Address.",
    "Given I register without Street Address, when I later view the created user/profile data (where applicable), then the system does not error and the address field is simply empty/absent."
  ],
  "technicalDependencies": [
    "Use existing form library and validation approach already in the repo (e.g., React Hook Form/Formik + Yup/Zod) rather than introducing a new one.",
    "Use existing backend validation framework already in the repo (e.g., class-validator, Joi, Zod, Rails validations, etc.)."
  ],
  "security": [
    "Continue to treat address as PII: avoid logging full street address in plaintext application logs.",
    "Maintain existing server-side validation/sanitization to prevent injection (e.g., trim input, reject unexpected types).",
    "Ensure no authorization changes are introduced; registration remains publicly accessible only as currently designed."
  ],
  "performance": [
    "No meaningful performance impact expected; avoid adding heavy new dependencies.",
    "Keep client bundle size unchanged by reusing existing validation utilities."
  ],
  "businessContext": "Making Street Address optional for all users reduces friction during sign-up and can improve conversion. Address can be collected later (e.g., during checkout/profile completion) while still allowing account creation. UX should clearly indicate which fields are required and which are optional by removing the required indicator for Street Address.",
  "otherNotes": "Update any copy/i18n strings that mention Street Address as required. Do not add an explicit '(optional)' label; only remove the required indicator. If analytics events track validation errors or form completion, ensure the change does not break event payloads. If there are downstream flows that assume address exists (shipping, billing), they should already handle missing address or be addressed separately (out of scope unless registration currently breaks). When Street Address is omitted, storing null or empty string is acceptable; follow existing conventions/normalization.",
  "llmAssumptions": [
    {
      "assumption": "There is a registration page with a Street Address input currently marked required and enforced by client-side validation."
    },
    {
      "assumption": "There is a backend registration endpoint that may validate required fields and may currently require street address."
    },
    {
      "assumption": "The project already has an established form validation approach (schema-based or imperative) that should be modified rather than replaced."
    },
    {
      "assumption": "Street Address should be optional for all users/regions (no conditional requirement)."
    },
    {
      "assumption": "When Street Address is omitted, persisting null or empty string is acceptable and should follow existing backend normalization conventions."
    }
  ],
  "llmOpenQuestions": [],
  "llmFileReferences": [],
  "inScope": [
    "Make Street Address optional on the registration form UI (remove required marker; do not add '(optional)' label).",
    "Update client-side validation so Street Address is not required for any user/region.",
    "Update server-side validation so Street Address is not required for registration.",
    "Normalize whitespace-only Street Address to empty per existing trimming rules.",
    "Update tests to cover the optional behavior and prevent regressions."
  ],
  "outOfScope": [
    "Redesigning the entire registration UX beyond required/optional changes for Street Address.",
    "Changing requirements for other address fields (city/state/postal code/country) unless they are coupled to Street Address validation and must be adjusted to keep registration working.",
    "Adding new address collection steps or profile completion flows.",
    "Data backfills or migrations for existing users unless required to prevent runtime errors."
  ],
  "suggestedFileChanges": [
    {
      "path": "frontend/**/Registration*.tsx",
      "rationale": "Update the registration form field configuration to remove required constraint/indicator for Street Address (no '(optional)' label) and adjust submission payload handling if it currently forces a value."
    },
    {
      "path": "frontend/**/validation/**",
      "rationale": "Update the form validation schema/rules to make Street Address optional for all regions and handle whitespace trimming consistently."
    },
    {
      "path": "frontend/**/i18n/**",
      "rationale": "Update any copy/translation strings that imply Street Address is required."
    },
    {
      "path": "backend/**/register*.*",
      "rationale": "Update registration request validation (DTO/schema/controller) to not require Street Address and to accept missing/empty values."
    },
    {
      "path": "backend/**/validators/**",
      "rationale": "If shared validators enforce required address, relax Street Address requirement while keeping other constraints when provided."
    },
    {
      "path": "frontend/**/__tests__/**",
      "rationale": "Add/adjust unit tests for registration form behavior when Street Address is omitted, whitespace-only, and across region/country selections."
    },
    {
      "path": "backend/**/__tests__/**",
      "rationale": "Add/adjust API tests to ensure registration succeeds without Street Address (missing and empty string) and still fails when other required fields are missing."
    }
  ],
  "promptForAider": "## Task: Make Street Address non-mandatory on registration (all regions)\n\nUpdate the registration flow so **Street Address is optional for all users/regions**.\n\n### Requirements\n- UI: remove required indicator (asterisk/required marker) for Street Address. **Do not** add a \"(optional)\" label.\n- Client validation: Street Address must not be required in any scenario (no country/region conditional requirement).\n- Keep existing constraints when Street Address is provided (max length/format/etc.).\n- Treat whitespace-only Street Address as empty (trim/normalize consistent with existing patterns).\n- Backend: registration request validation must accept Street Address being **absent** or **empty string**; normalize to null/empty per existing conventions.\n- No regressions: other required fields remain required.\n\n### Suggested files\n- `frontend/**/Registration*.tsx`\n- `frontend/**/validation/**`\n- `frontend/**/i18n/**` (if any strings say address is required)\n- `backend/**/register*.*`\n- `backend/**/validators/**`\n- `frontend/**/__tests__/**`\n- `backend/**/__tests__/**`\n\n### Tests to add/update\n- FE: submit registration with Street Address blank succeeds; no required marker; no required error on blur.\n- FE: Street Address optional regardless of selected country/region.\n- FE: whitespace-only Street Address treated as empty and allowed.\n- FE: provided Street Address still validated (e.g., too long fails).\n- BE: registration accepts payload without Street Address.\n- BE: registration accepts payload with Street Address: \"\" (empty string) and succeeds (or normalizes).\n- Regression: missing other required fields still fails.\n\n### Security/PII\n- Do not add logging of full street address; keep existing PII handling and sanitization.\n"
}