{
  "taskId": 11,
  "name": "[TASK]: firstName field in student registration form should not accept more than 6 letters",
  "createdAt": "2025-12-26T08:08:18.000Z",
  "updatedAt": "2025-12-26T08:08:32.000Z",
  "allAssignees": [
    "PrasanKumar93"
  ],
  "assignee": "PrasanKumar93",
  "description": "### Task explanation\n\nfirstName field in student registration form should not accept more than 6 letters\n\n### Task validations\n\n_No response_\n\n### Unit Test Cases\n\n_No response_\n\n### Task acceptance criteria\n\n- field must not take more than 6 characters\n\n### Task context files\n\n_No response_\n\n### Tech / Package Dependencies\n\n_No response_\n\n### Security & Performance\n\n_No response_\n\n### Other business context\n\n_No response_\n\n### Other notes\n\n_No response_\n\n### Checklist\n\n- [ ] Task documentation required\n- [ ] Task deployment required\n\n### Final Confirmation\n\n- [ ] I confirm the spec is correct and ready for development. (Good context now means less time spent in code review later :)",
  "taskStatus": "TODO",
  "taskCategory": "",
  "priority": "",
  "llmTaskExplanation": "Implement a maximum length constraint of 6 characters for the `firstName` field in the student registration flow, enforced consistently on both backend and frontend, with trimming of outer spaces before validating length.\n\nBackend: Update the Zod `StudentSchema` so `firstName` is trimmed (outer spaces removed), required (non-empty after trim), and has a maximum length of 6 characters. Return a clear validation message when exceeded.\n\nFrontend: Update the student registration form UI so the `firstName` input enforces `maxLength=6` for typing, and for paste events that would exceed 6 characters, block the paste (do not insert the over-limit value). Ensure the form submission is blocked when invalid and show a user-friendly validation error when the value is invalid (e.g., empty after trim or exceeds 6).\n\nAdd/adjust tests: Backend Vitest tests should assert schema validation fails for >6 (after trim) and passes for <=6. Frontend React Testing Library tests should assert the input has maxLength, typing is limited, paste over limit is blocked, and submission behavior is correct.",
  "validations": [
    "firstName is required and must be non-empty after trimming outer spaces.",
    "firstName is trimmed (outer spaces removed) before validating length and required-ness.",
    "firstName must be at most 6 characters after trim (length <= 6).",
    "UI must prevent typing beyond 6 characters via maxLength.",
    "If a user pastes a value that would exceed 6 characters, the paste is blocked (no over-limit value inserted).",
    "Backend must reject create/update payloads where trimmed firstName exceeds 6 characters.",
    "Validation error message for max length is clear and specific (e.g., \"First name must be at most 6 characters\")."
  ],
  "unitTests": [
    "Backend (Vitest): StudentSchema parses successfully when firstName length is 1..6 after trim (e.g., \"Samuel\" (6), \"  Sam  \" -> \"Sam\").",
    "Backend (Vitest): StudentSchema parse fails when firstName length is 7 after trim (e.g., \"Samuele\", \"  Samuele  \"), and error includes the max-length message for firstName.",
    "Backend (Vitest): StudentSchema parse fails when firstName is empty or whitespace-only (e.g., \"\", \"   \") after trim, preserving required validation behavior.",
    "Frontend (React Testing Library): firstName input has maxLength=6 (assert via DOM attribute on the underlying input).",
    "Frontend (React Testing Library): typing more than 6 characters results in the input value being limited to 6 characters.",
    "Frontend (React Testing Library): pasting a string longer than 6 characters is blocked (value remains unchanged) and submission is not allowed if firstName is invalid.",
    "Frontend (React Testing Library): entering exactly 6 characters allows submission (assuming other required fields are filled with valid values in the test).",
    "Frontend (React Testing Library): entering whitespace-only firstName triggers required validation (after trim) and blocks submission."
  ],
  "acceptanceCriteria": [
    "Given a user is on the student registration form, when they type into First Name, then the field does not allow more than 6 characters to be entered.",
    "Given a user attempts to paste a value longer than 6 characters into First Name, when the paste occurs, then the paste is blocked and the field value does not become an over-limit value.",
    "Given a user enters First Name with leading/trailing spaces, when validation runs, then outer spaces are ignored (trimmed) for required and max-length checks.",
    "Given a client submits a registration request with firstName longer than 6 characters after trimming, when the backend validates the payload, then the request is rejected with a validation error indicating firstName exceeds the maximum length.",
    "Given firstName is 6 characters or fewer after trimming, when the user submits the form (with other required fields valid), then submission proceeds without firstName validation errors."
  ],
  "technicalDependencies": [
    "Backend: zod (existing) for schema validation",
    "Frontend: MUI TextField via existing TextInput component (existing)",
    "Frontend: existing form validation approach (zod/resolver if already used) extended to include trim + max length",
    "Testing: Vitest (backend + frontend) and React Testing Library (frontend)"
  ],
  "security": [
    "Enforce max length and trimming on backend to prevent bypassing client-side constraints.",
    "Do not log full student payloads containing PII in validation errors; log only field names and error summaries if logging exists."
  ],
  "performance": [
    "Client-side maxLength attribute avoids unnecessary validation churn while typing.",
    "Paste-blocking handler is O(n) on pasted text length and negligible for typical inputs.",
    "No measurable bundle size impact expected; reuse existing validation utilities/components."
  ],
  "businessContext": "Business rule: student first names must be 6 characters or fewer (counting characters after trimming outer spaces). This likely supports formatting constraints (e.g., ID cards, legacy systems, or fixed-width exports). The rule must be enforced consistently in UI and API to avoid inconsistent data entry.",
  "otherNotes": "Implement validation in both layers (frontend UX + backend data integrity). Trim outer spaces before validating required/max length. For UX, enforce maxLength for typing and explicitly block paste operations that would exceed the limit. Keep error copy consistent across UI and API where feasible. Update any shared types/validators if the project maintains a frontend Zod schema mirroring backend rules. Ensure changes follow repo conventions: arrow functions, consolidated exports, and no mocking in tests.",
  "llmAssumptions": [
    {
      "assumption": "Student registration is created via the Next.js route `frontend/src/app/students/new/page.tsx` using `components/business/StudentRegistrationForm`."
    },
    {
      "assumption": "The First Name input is implemented using a reusable UI component (likely `frontend/src/components/ui/TextInput`) that supports passing `inputProps`/`maxLength` down to the underlying MUI input."
    },
    {
      "assumption": "Backend request validation uses `StudentSchema` (or a derived schema) to validate incoming create/update student payloads."
    },
    {
      "assumption": "Frontend form validation is either Zod-based or can be extended to include trim + max-length rules without introducing new libraries."
    },
    {
      "assumption": "Length validation counts all characters in the trimmed value (no special-casing for hyphens/spaces inside the name)."
    },
    {
      "assumption": "UX requirement: if a paste would exceed 6 characters, the paste is blocked rather than truncating the pasted value."
    }
  ],
  "llmOpenQuestions": [],
  "llmFileReferences": [
    {
      "path": "backend/src/schemas/student.schema.ts"
    },
    {
      "path": "frontend/src/app/students/new/page.tsx"
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/"
    },
    {
      "path": "frontend/src/components/ui/TextInput/"
    }
  ],
  "inScope": [
    "Add backend Zod validation: trim outer spaces, require non-empty after trim, and enforce firstName max length 6.",
    "Add frontend input constraint (maxLength=6) for firstName in student registration form.",
    "Add frontend paste handling for firstName: block paste if it would exceed 6 characters.",
    "Add/adjust backend Vitest tests for trim + max length + required validation.",
    "Add/adjust frontend Vitest/RTL tests for maxLength attribute, typing limitation, paste-blocking behavior, and submission blocking."
  ],
  "outOfScope": [
    "Changing limits for lastName or other fields.",
    "Database migrations or retroactively cleaning existing student records with longer first names.",
    "Adding new third-party validation/form libraries.",
    "Changing API endpoints or response formats beyond existing validation error behavior.",
    "Normalizing internal whitespace or special-casing hyphens/diacritics beyond trimming outer spaces."
  ],
  "suggestedFileChanges": [
    {
      "path": "backend/src/schemas/student.schema.ts",
      "rationale": "Trim outer spaces and add `.max(6, ...)` constraint to `firstName` in StudentSchema; ensure required validation applies after trim."
    },
    {
      "path": "backend/src/schemas/student.schema.test.ts",
      "rationale": "Add Vitest coverage for trimmed firstName <=6 pass, >6 fail, and whitespace-only fail."
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/StudentRegistrationForm.tsx",
      "rationale": "Apply maxLength=6 to firstName input and add onPaste handler to block paste that would exceed 6; ensure form-level validation blocks submission when invalid."
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/StudentRegistrationForm.test.tsx",
      "rationale": "Add RTL tests verifying maxLength attribute, typing >6 limited, paste >6 blocked, trim/required behavior, and submission blocking."
    },
    {
      "path": "frontend/src/lib/validators.ts",
      "rationale": "If the form uses shared Zod validators, add/update a firstName validator with trim + max length 6 to keep rules centralized."
    }
  ],
  "promptForAider": "## Task: Limit student `firstName` to max 6 characters (trim outer spaces) + block over-limit paste\n\n### Backend\n- File: `backend/src/schemas/student.schema.ts`\n- Update `firstName` validation to:\n  - trim outer spaces before checks\n  - required (non-empty after trim)\n  - max length **6** after trim\n  - clear message: `First name must be at most 6 characters`\n\n### Frontend\n- File: `frontend/src/components/business/StudentRegistrationForm/StudentRegistrationForm.tsx`\n- First Name input:\n  - set underlying input `maxLength: 6` (e.g., MUI `inputProps={{ maxLength: 6 }}`)\n  - add `onPaste` handler: if pasted text would make value length > 6, `event.preventDefault()` (block paste)\n  - ensure validation trims outer spaces and blocks submit when invalid\n\n### Tests (no mocks)\n- Backend: `backend/src/schemas/student.schema.test.ts`\n  - pass: `\"Samuel\"` (6), `\"  Sam  \"` -> `\"Sam\"`\n  - fail: `\"Samuele\"` (7), `\"   \"` (whitespace-only)\n- Frontend: `frontend/src/components/business/StudentRegistrationForm/StudentRegistrationForm.test.tsx`\n  - input has `maxLength=6`\n  - typing >6 results in value length 6\n  - paste >6 is blocked (value unchanged)\n  - whitespace-only fails after trim; submit blocked\n  - exactly 6 chars allows submit (with other required fields valid)\n\n### Notes\n- Keep error copy consistent across UI/API.\n- Follow repo conventions: arrow functions only, consolidated exports, no mocking in tests.\n"
}