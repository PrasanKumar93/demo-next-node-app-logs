{
  "taskId": 11,
  "name": "[TASK]: firstName field in student registration form should not accept more than 6 letters",
  "createdAt": "2025-12-26T08:08:18.000Z",
  "updatedAt": "2025-12-26T08:42:32.000Z",
  "allAssignees": [
    "PrasanKumar93"
  ],
  "assignee": "PrasanKumar93",
  "description": "### Task explanation\n\nfirstName field in student registration form should not accept more than 6 letters\n\n### Task validations\n\n_No response_\n\n### Unit Test Cases\n\n_No response_\n\n### Task acceptance criteria\n\n- field must not take more than 6 characters\n\n### Task context files\n\n_No response_\n\n### Tech / Package Dependencies\n\n_No response_\n\n### Security & Performance\n\n_No response_\n\n### Other business context\n\n_No response_\n\n### Other notes\n\n_No response_\n\n### Checklist\n\n- [ ] Task documentation required\n- [ ] Task deployment required\n\n### Final Confirmation\n\n- [ ] I confirm the spec is correct and ready for development. (Good context now means less time spent in code review later :)",
  "taskStatus": "TODO",
  "taskCategory": "",
  "priority": "",
  "llmTaskExplanation": "Implement a maximum length constraint of 6 characters for the `firstName` field in the student registration flow, enforced both on the frontend form and on the backend validation schema. Trim leading/trailing whitespace before validating length. On the backend, update the Zod `StudentSchema` so `firstName` rejects values longer than 6 characters with a clear validation message. On the frontend, update the Student Registration form input for `firstName` to prevent/limit entry beyond 6 characters (e.g., `maxLength=6`) and ensure the form validation schema (Zod v4) also enforces `firstName` length <= 6 so users get immediate feedback before submission. Add/adjust tests to cover both backend schema validation and frontend form behavior/error messaging (any valid error copy is acceptable).",
  "validations": [
    "firstName is required (non-empty string after trimming leading/trailing whitespace).",
    "firstName must be a string with trimmed length between 1 and 6 characters inclusive.",
    "firstName with trimmed length 6 is accepted.",
    "firstName with trimmed length 7+ is rejected with a user-visible validation error (frontend) and a schema validation error (backend).",
    "firstName should not be silently truncated on submit; it should be blocked at input level and/or fail validation with a clear message.",
    "Leading/trailing whitespace is trimmed before validation (e.g., \" John \" validates as \"John\").",
    "Whitespace-only firstName (e.g., \"   \") is invalid after trimming."
  ],
  "unitTests": [
    "Backend (Vitest): StudentSchema parses successfully when firstName trimmed length is 1 and 6 (boundary tests).",
    "Backend (Vitest): StudentSchema rejects when firstName trimmed length is 7+ and returns an error for path `firstName` (message can be any valid error).",
    "Backend (Vitest): StudentSchema trims leading/trailing whitespace before validating length (e.g., \" John \" accepted; \" 1234567 \" rejected after trim).",
    "Backend (Vitest): StudentSchema rejects whitespace-only firstName (e.g., \"   \") after trimming.",
    "Frontend (React Testing Library): StudentRegistrationForm firstName input has `maxLength=6` (assert input attribute/props).",
    "Frontend (React Testing Library): typing more than 6 characters into firstName results in the input value being at most 6 characters (if maxLength is used).",
    "Frontend (React Testing Library): submitting the form with firstName length 7+ (e.g., by setting value programmatically/bypassing maxLength) shows a validation error message and does not submit (or does not call the submit handler / does not send the request).",
    "Frontend (React Testing Library): leading/trailing whitespace is trimmed before validation on submit (e.g., \" John \" passes firstName validation when other required fields are valid).",
    "Frontend (React Testing Library): submitting with firstName trimmed length 6 succeeds past client-side validation (other required fields can be filled with valid values)."
  ],
  "acceptanceCriteria": [
    "Given a user is on the student registration page, when they enter a first name longer than 6 characters, then the UI prevents additional characters and/or shows a validation error indicating the maximum is 6 characters (any valid error copy).",
    "Given a user submits the registration form with a firstName longer than 6 characters (e.g., via manual request or bypassing UI), then the backend rejects the request due to validation and returns a validation error for `firstName`.",
    "Given firstName contains leading/trailing spaces, when the user submits, then the system trims those spaces before validating and storing/processing the value.",
    "Given firstName is whitespace-only, when the user submits, then the UI shows a validation error and the backend rejects the request.",
    "Given firstName is 6 characters or fewer after trimming and all other required fields are valid, when the user submits the form, then the submission proceeds without firstName-related validation errors.",
    "Automated tests exist covering the 6-character boundary, trimming behavior, and the >6 rejection for both frontend and backend validation."
  ],
  "technicalDependencies": [
    "Backend: zod (^3) in `backend/src/schemas/student.schema.ts`",
    "Frontend: Zod (^4) form validation (likely in `frontend/src/lib/validators.ts` or form-local schema)",
    "Frontend UI: existing TextInput component (`frontend/src/components/ui/TextInput/`) and StudentRegistrationForm (`frontend/src/components/business/StudentRegistrationForm/`)",
    "Testing: Vitest (backend + frontend) and React Testing Library (frontend)"
  ],
  "security": [
    "Enforce server-side validation (do not rely solely on client-side maxLength).",
    "Do not log full PII payloads on validation errors; log only necessary metadata if logging exists.",
    "Return validation errors without exposing stack traces in production."
  ],
  "performance": [
    "Client-side validation should be synchronous and lightweight (Zod schema check only).",
    "No additional network calls introduced; no measurable bundle size increase beyond minor schema changes."
  ],
  "businessContext": "Student registration requires a constrained first name length (<= 6) and must be consistently enforced across UI and API to prevent invalid records. Leading/trailing whitespace should be ignored for this constraint (trim before validating).",
  "otherNotes": "Error copy for exceeding 6 characters can be any valid message; consistency across frontend/backend is preferred but not required. Prefer consistent validation behavior across FE/BE: trim leading/trailing whitespace before applying min/max length checks. Ensure changes follow repo coding preferences (arrow functions, consolidated exports, hyphenated filenames, `export type` separately). If the frontend currently uses a shared validator utility, update it rather than duplicating rules. Update any examples/story pages if they include the form and rely on longer names.",
  "llmAssumptions": [
    {
      "assumption": "There is a frontend Zod validation schema for the student registration form (either co-located with StudentRegistrationForm or in `frontend/src/lib/validators.ts`) that should be updated to enforce max length 6."
    },
    {
      "assumption": "The StudentRegistrationForm uses a TextInput (or MUI TextField wrapper) that supports passing `inputProps` (or equivalent) to set `maxLength`."
    },
    {
      "assumption": "Backend request validation uses `StudentSchema` (directly or indirectly) for create-student endpoints, so updating it will enforce the rule server-side."
    },
    {
      "assumption": "Tests can be written without mocks by rendering the real form component and by directly invoking the real Zod schema parse methods."
    },
    {
      "assumption": "Both frontend and backend validation should trim leading/trailing whitespace for firstName before applying the 1..6 length constraint."
    },
    {
      "assumption": "User-facing error copy for exceeding 6 characters is not strict; any valid error message is acceptable."
    }
  ],
  "llmOpenQuestions": [],
  "llmFileReferences": [
    {
      "path": "backend/src/schemas/student.schema.ts"
    },
    {
      "path": "frontend/src/app/students/new/page.tsx"
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/"
    },
    {
      "path": "frontend/src/components/ui/TextInput/"
    },
    {
      "path": "frontend/src/lib/validators.ts"
    }
  ],
  "inScope": [
    "Add backend validation: `firstName` trimmed max length 6 (and min length 1) in StudentSchema.",
    "Add frontend input constraint (maxLength=6) for firstName in the student registration form.",
    "Add/update frontend validation schema to enforce firstName trimmed length <= 6 with a clear error message (any valid copy).",
    "Ensure leading/trailing whitespace is trimmed before validating firstName length on both frontend and backend.",
    "Add/adjust backend and frontend tests to cover boundary, trimming, and rejection cases."
  ],
  "outOfScope": [
    "Changing constraints for lastName or other fields.",
    "Database migrations or retroactively fixing existing student records with longer first names.",
    "Adding new API endpoints or changing response formats beyond validation error content already used.",
    "Internationalization/localization of validation messages (unless already present)."
  ],
  "suggestedFileChanges": [
    {
      "path": "backend/src/schemas/student.schema.ts",
      "rationale": "Enforce `firstName` trimmed maximum length of 6 via Zod (e.g., `.trim().min(1, ...).max(6, ...)`) to ensure server-side validation."
    },
    {
      "path": "backend/src/schemas/student.schema.test.ts",
      "rationale": "Add Vitest coverage for StudentSchema firstName boundary (6), trimming behavior, whitespace-only rejection, and rejection (>6). (Create if not present; co-locate tests per repo conventions.)"
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/",
      "rationale": "Update the firstName field to set input maxLength and ensure the form-level validation schema trims and enforces <= 6."
    },
    {
      "path": "frontend/src/lib/validators.ts",
      "rationale": "If the student form schema is defined/shared here, update firstName rule to `.trim().min(1, ...).max(6, ...)` to keep validation centralized."
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/student-registration-form.test.tsx",
      "rationale": "Add React Testing Library tests verifying maxLength behavior, trimming behavior, and validation error on >6 characters (including bypassing maxLength). (Filename may vary; follow existing naming.)"
    }
  ],
  "promptForAider": "## Task: Limit student registration `firstName` to max 6 characters (trimmed)\n\n### What to change\n- Enforce `firstName` trimmed length 1..6 across the stack.\n\n### Backend\n- File: `backend/src/schemas/student.schema.ts`\n- Update `StudentSchema.firstName` to trim and validate length:\n  - `.trim().min(1, <any valid error>).max(6, <any valid error>)`\n- Ensure create-student request validation uses this schema (already assumed).\n\n### Frontend\n- Files:\n  - `frontend/src/components/business/StudentRegistrationForm/` (firstName input)\n  - `frontend/src/lib/validators.ts` (or wherever the form Zod schema lives)\n- Add `maxLength={6}` (or `inputProps={{ maxLength: 6 }}` depending on TextInput wrapper).\n- Update frontend Zod schema for firstName to `.trim().min(1, ...).max(6, ...)`.\n- Error copy is not strict; any valid message is acceptable.\n\n### Validations\n- firstName required after trimming.\n- trimmed length <= 6.\n- whitespace-only invalid.\n\n### Tests (no mocks)\n- Backend (Vitest):\n  - parse ok for trimmed length 1 and 6\n  - reject for trimmed length 7+\n  - trims leading/trailing whitespace\n  - rejects whitespace-only\n- Frontend (RTL + Vitest):\n  - input has maxLength=6\n  - typing >6 results in value length <=6\n  - bypass maxLength (set value programmatically) and submit => shows validation error and does not submit\n  - submit with \" John \" passes firstName validation when other required fields are valid\n\n### Notes\n- Follow repo conventions: arrow functions only, consolidated exports at end, hyphenated filenames, `export type` separately.\n- Prefer consistent behavior FE/BE (trim then validate)."
}