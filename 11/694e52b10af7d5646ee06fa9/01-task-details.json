{
  "taskId": 11,
  "name": "[TASK]: firstName field in student registration form should not accept more than 6 letters",
  "createdAt": "2025-12-26T08:08:18.000Z",
  "updatedAt": "2025-12-26T09:17:24.000Z",
  "allAssignees": [
    "PrasanKumar93"
  ],
  "assignee": "PrasanKumar93",
  "description": "### Task explanation\n\nfirstName field in student registration form should not accept more than 6 letters\n\n### Task validations\n\n_No response_\n\n### Unit Test Cases\n\n_No response_\n\n### Task acceptance criteria\n\n- field must not take more than 6 characters\n\n### Task context files\n\n_No response_\n\n### Tech / Package Dependencies\n\n_No response_\n\n### Security & Performance\n\n_No response_\n\n### Other business context\n\n_No response_\n\n### Other notes\n\n_No response_\n\n### Checklist\n\n- [ ] Task documentation required\n- [ ] Task deployment required\n\n### Final Confirmation\n\n- [ ] I confirm the spec is correct and ready for development. (Good context now means less time spent in code review later :)",
  "taskStatus": "TODO",
  "taskCategory": "",
  "priority": "",
  "llmTaskExplanation": "Enforce a maximum length of 6 characters for the `firstName` field in the student registration flow, with validation applied consistently on both backend and frontend.\n\nBackend: Update the Zod `StudentSchema` to reject `firstName` values longer than 6 characters (e.g., `z.string().min(1)...max(6, ...)`). Ensure the student creation/update endpoints that use this schema return a clear validation error when `firstName` exceeds 6.\n\nFrontend: Update the student registration form UI to prevent/flag input longer than 6 characters for `firstName`. This should include (a) an input-level constraint (e.g., `inputProps={{ maxLength: 6 }}` on the underlying MUI TextField via the projectâ€™s `TextInput` component) and (b) form validation (likely Zod-based) that shows an inline error message when the user enters more than 6 characters. Ensure the form cannot be submitted when invalid.\n\nAdd/adjust tests: Backend Vitest tests should verify schema/API rejects >6. Frontend React Testing Library tests should verify the input constraint and validation messaging/submit blocking.",
  "validations": [
    "firstName is required (non-empty string).",
    "firstName must be at most 6 characters (length <= 6).",
    "firstName with exactly 6 characters is valid.",
    "firstName with 7+ characters is invalid and must produce a user-visible error on the frontend and a validation error response on the backend.",
    "Leading/trailing spaces behavior should be consistent: either count spaces toward the 6-char limit or trim before validating (see open question)."
  ],
  "unitTests": [
    "Backend (Vitest): StudentSchema parses successfully when firstName length is 1..6.",
    "Backend (Vitest): StudentSchema fails validation when firstName length is 7+ and error message references max length.",
    "Backend (Supertest/Vitest): POST create-student (or equivalent) returns 4xx with validation details when firstName is 7+ characters.",
    "Frontend (React Testing Library): firstName input has maxLength=6 applied to the underlying input element.",
    "Frontend (React Testing Library): entering a 7th character results in either (a) the value being capped at 6 due to maxLength or (b) an inline validation error shown (depending on implementation), and submission is blocked.",
    "Frontend (React Testing Library): entering exactly 6 characters allows submission (assuming other required fields are valid)."
  ],
  "acceptanceCriteria": [
    "Given a user is filling the student registration form, when they try to enter more than 6 characters in the First Name field, then the UI prevents additional characters and/or shows a clear validation error and the form cannot be submitted.",
    "Given a client submits a student registration payload with firstName longer than 6 characters, when the backend validates the request, then it rejects the request with a validation error (4xx) indicating firstName exceeds the maximum length.",
    "Given firstName is 6 characters or fewer, when the user submits the form, then firstName passes validation (no max-length error)."
  ],
  "technicalDependencies": [
    "Backend: zod (existing) for schema validation in backend/src/schemas/student.schema.ts",
    "Frontend: existing Zod-based form validation utilities (frontend/src/lib/validators.ts) if used by the form",
    "Frontend: existing StudentRegistrationForm component and shared TextInput UI component (MUI-based) to apply maxLength"
  ],
  "security": [
    "Maintain server-side validation as the source of truth; do not rely solely on client-side maxLength.",
    "Ensure validation errors do not leak sensitive data; return only field-level validation messages."
  ],
  "performance": [
    "No measurable performance impact expected; validation is O(n) on a short string.",
    "Avoid adding heavy new dependencies; use existing Zod and MUI capabilities."
  ],
  "businessContext": "Business rule: student first names must be limited to 6 characters. This likely supports a downstream constraint (e.g., ID card printing, legacy system field width, or reporting). UX should make the constraint obvious and prevent invalid submissions.",
  "otherNotes": "Implement validation in both layers (frontend + backend) for best UX and data integrity. Ensure error message is user-friendly (e.g., \"First name must be 6 characters or fewer\"). Update any shared types/validators if the frontend mirrors backend constraints. Add/adjust tests without mocks per repo testing preference.",
  "llmAssumptions": [
    {
      "assumption": "Student registration is implemented in frontend/src/components/business/StudentRegistrationForm/ and used by the /students/new page."
    },
    {
      "assumption": "Backend student create/update endpoints validate request bodies using StudentSchema (directly or via a wrapper)."
    },
    {
      "assumption": "Frontend uses a shared TextInput component wrapping MUI TextField and supports passing inputProps (or equivalent) down to the native input."
    },
    {
      "assumption": "Frontend has some Zod-based validation schema for the form (either local to the form or in frontend/src/lib/validators.ts) that can be updated to include max(6)."
    }
  ],
  "llmOpenQuestions": [
    {
      "question": "Should leading/trailing whitespace be trimmed before applying the 6-character limit (e.g., \" John \" -> \"John\"), or should spaces count toward the limit as typed?"
    },
    {
      "question": "Should the UI hard-prevent typing beyond 6 characters (maxLength only), or allow typing and show an error message (or both)?"
    }
  ],
  "llmFileReferences": [
    {
      "path": "backend/src/schemas/student.schema.ts"
    },
    {
      "path": "frontend/src/app/students/new/page.tsx"
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/"
    },
    {
      "path": "frontend/src/components/ui/TextInput/"
    },
    {
      "path": "frontend/src/lib/validators.ts"
    }
  ],
  "inScope": [
    "Add backend Zod max-length validation for StudentSchema.firstName (<= 6).",
    "Add frontend input constraint and form validation for firstName (<= 6).",
    "Add/adjust backend and frontend tests to cover the new constraint.",
    "Ensure error messaging is clear and consistent."
  ],
  "outOfScope": [
    "Changing constraints for lastName or other fields.",
    "Database migrations or retroactive cleanup of existing student records with longer first names.",
    "Internationalization/localization of validation messages (unless already present).",
    "Adding new third-party validation libraries."
  ],
  "suggestedFileChanges": [
    {
      "path": "backend/src/schemas/student.schema.ts",
      "rationale": "Add `.max(6, \"First name must be 6 characters or fewer\")` to firstName validation."
    },
    {
      "path": "backend/src/api/**",
      "rationale": "Add/adjust API tests (and possibly handlers) to ensure requests with firstName > 6 return a validation error response."
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/**",
      "rationale": "Apply maxLength to the firstName input and update form validation schema/rules to enforce <= 6 with an inline error."
    },
    {
      "path": "frontend/src/components/ui/TextInput/**",
      "rationale": "If needed, ensure TextInput supports passing `inputProps.maxLength` through to the underlying input element."
    },
    {
      "path": "frontend/src/lib/validators.ts",
      "rationale": "If the form uses shared validators, update firstName rule to include max length 6."
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/**/*.test.tsx",
      "rationale": "Add React Testing Library tests for maxLength behavior, validation message, and submit blocking."
    }
  ],
  "promptForAider": "## Task: Limit student `firstName` to max 6 characters (frontend + backend)\n\n### What to change\n- **Backend**: Update `backend/src/schemas/student.schema.ts` so `firstName` is `z.string().min(1, ...).max(6, \"First name must be 6 characters or fewer\")`.\n- Ensure any student create/update API that uses `StudentSchema` rejects payloads where `firstName.length > 6` with a clear 4xx validation error.\n\n- **Frontend**: In the student registration form (used by `/students/new`), enforce the same rule:\n  - Add an input constraint: set native `maxLength: 6` on the firstName input (via the project `TextInput` wrapper / MUI TextField).\n  - Add form validation (Zod-based) so >6 shows an inline error and blocks submit.\n\n### Validations\n- firstName required\n- firstName length <= 6\n- exactly 6 is valid; 7+ invalid\n\n### Tests (no mocks)\n- Backend Vitest: schema accepts 1..6, rejects 7+ with max-length message.\n- Backend Supertest: POST student with firstName 7+ returns 4xx validation error.\n- Frontend RTL: firstName input has `maxLength=6`.\n- Frontend RTL: attempting 7th char is prevented and/or shows error; submit blocked.\n\n### Notes\n- Keep changes minimal; use existing Zod/MUI components.\n- Follow repo conventions: arrow functions, exports consolidated at end, no mocking in tests.\n"
}