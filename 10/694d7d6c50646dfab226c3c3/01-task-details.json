{
  "taskId": 10,
  "name": "[TASK]: In Student registration page, firstName should allow max 6 characters only",
  "createdAt": "2025-12-25T18:06:05.000Z",
  "updatedAt": "2025-12-25T18:06:16.000Z",
  "allAssignees": [
    "PrasanKumar93"
  ],
  "assignee": "PrasanKumar93",
  "description": "### Task explanation\n\nIn Student registration page, firstName should allow max 6 characters only\n\n### Task validations\n\n_No response_\n\n### Unit Test Cases\n\n_No response_\n\n### Task acceptance criteria\n\n- both at backend schema and front end - validation must apply\n\n### Task context files\n\n_No response_\n\n### Tech / Package Dependencies\n\n_No response_\n\n### Security & Performance\n\n_No response_\n\n### Other business context\n\n_No response_\n\n### Other notes\n\n_No response_\n\n### Checklist\n\n- [ ] Task documentation required\n- [ ] Task deployment required\n\n### Final Confirmation\n\n- [ ] I confirm the spec is correct and ready for development. (Good context now means less time spent in code review later :)",
  "taskStatus": "TODO",
  "taskCategory": "",
  "priority": "",
  "llmTaskExplanation": "Implement a maximum length constraint of 6 characters for the `firstName` field on the Student Registration flow, enforced consistently on both backend and frontend.\n\nBackend: Update the Zod student schema so `firstName` is trimmed before validation and validates `min(1)` and `max(6)` with a clear error message. Ensure any API route(s) that create/update students rely on this schema so requests with `firstName` longer than 6 (after trimming) are rejected with a validation error.\n\nFrontend: Update the Student Registration form UI (route `/students/new`) so the `firstName` input prevents/flags values longer than 6 characters after trimming. This should include (a) an input-level constraint (e.g., `maxLength={6}`) and (b) form validation that shows a user-friendly error when the trimmed value exceeds 6 (including when pasted). Ensure the form cannot be submitted while invalid, and that backend validation errors are surfaced if they occur.\n\nAdd/adjust tests in both backend and frontend to cover the new constraint, including trimming behavior.",
  "validations": [
    "firstName is required and must be a string",
    "firstName must be trimmed (leading/trailing spaces removed) before validating length",
    "After trimming, firstName length must be between 1 and 6 characters inclusive",
    "After trimming, firstName length of exactly 6 characters is valid",
    "After trimming, firstName length of 7+ characters is invalid and returns a clear validation message",
    "Frontend should prevent typing beyond 6 characters via input `maxLength` and still validate pasted values (do not rely only on `maxLength`)",
    "Backend must reject requests that exceed 6 characters (after trimming) even if frontend validation is bypassed"
  ],
  "unitTests": [
    "Backend (vitest): StudentSchema parses successfully when firstName (after trimming) length is 1..6",
    "Backend (vitest): StudentSchema rejects when firstName is empty or whitespace-only (e.g., \"   \") with the expected message",
    "Backend (vitest): StudentSchema rejects when firstName (after trimming) length is 7 with the expected message",
    "Backend (vitest): StudentSchema trims firstName (e.g., \" Bob \") and accepts when trimmed length is within 1..6",
    "Backend (integration-style, if API tests exist): POST create-student with firstName that becomes 7 chars after trimming returns 4xx validation error and does not create a record",
    "Frontend (React Testing Library): firstName input has `maxLength=6` (or equivalent) applied",
    "Frontend (React Testing Library): entering/pasting 7 characters into firstName results in a visible validation error and submit is disabled/blocked",
    "Frontend (React Testing Library): entering exactly 6 characters allows form validation to pass (assuming other required fields are valid)",
    "Frontend (React Testing Library): entering whitespace-only firstName shows required/invalid error and blocks submit",
    "Frontend (React Testing Library): entering a value with leading/trailing spaces validates based on trimmed value (e.g., \" Bob \")"
  ],
  "acceptanceCriteria": [
    "Given a user is on `/students/new`, when they type into First Name, then the input does not allow more than 6 characters to be entered (maxLength enforced)",
    "Given a user pastes a value longer than 6 characters into First Name, when the form validates, then an error message is shown and the form cannot be submitted",
    "Given a user enters a First Name with leading/trailing spaces, when the form validates, then the value is treated as trimmed for length validation",
    "Given a user enters a First Name that is empty or whitespace-only, when the form validates, then a required/invalid error is shown and the form cannot be submitted",
    "Given a client submits a create/update request with `firstName` longer than 6 characters after trimming, when the backend validates the payload, then the request is rejected with a validation error response",
    "Given a user enters a First Name of 1 to 6 characters after trimming and all other required fields are valid, when they submit, then the student can be registered successfully"
  ],
  "technicalDependencies": [
    "Backend: zod (existing) for schema validation",
    "Frontend: existing StudentRegistrationForm components and existing validation utilities in `frontend/src/lib/validators.ts` (if used by the form)",
    "Testing: vitest (backend + frontend) and React Testing Library (frontend)"
  ],
  "security": [
    "Do not rely on frontend-only validation; enforce max length in backend schema validation (after trimming)",
    "Return validation errors without leaking sensitive data; only include field-level messages",
    "Ensure request payload validation happens before any database write"
  ],
  "performance": [
    "Validation should be O(n) on input length and negligible; no additional network calls required",
    "Avoid adding heavy new dependencies; use existing zod + current form validation approach"
  ],
  "businessContext": "Student registration requires a strict constraint that `firstName` is at most 6 characters (after trimming leading/trailing spaces). This is likely a business rule for formatting, ID card constraints, or legacy system compatibility, and must be enforced consistently across UI and API to prevent invalid records.",
  "otherNotes": "No database migration is required because this is a validation-only change; existing records with longer first names (if any) may remain but new/updated submissions should be blocked. Error copy can be any clear, user-friendly message (e.g., \"First name must be at most 6 characters\"). Follow repo conventions: arrow functions, consolidated exports, and no mocking in tests.",
  "llmAssumptions": [
    {
      "assumption": "Student creation/update endpoints validate request bodies using `StudentSchema` (directly or via a shared validation layer)."
    },
    {
      "assumption": "The student registration UI is implemented under `frontend/src/components/business/StudentRegistrationForm/` and used by `frontend/src/app/students/new/page.tsx`."
    },
    {
      "assumption": "Frontend form validation is either zod-based or uses utilities in `frontend/src/lib/validators.ts`, and can be extended to include a trimmed max-length rule."
    },
    {
      "assumption": "Business rule: trim leading/trailing spaces before counting characters for the 6-character limit."
    },
    {
      "assumption": "Error message copy is flexible as long as it clearly indicates the 6-character maximum."
    }
  ],
  "llmOpenQuestions": [],
  "llmFileReferences": [
    {
      "path": "backend/src/schemas/student.schema.ts"
    },
    {
      "path": "frontend/src/app/students/new/page.tsx"
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/"
    },
    {
      "path": "frontend/src/lib/validators.ts"
    }
  ],
  "inScope": [
    "Add backend validation: `firstName` trimmed and max length 6 in StudentSchema",
    "Add frontend input constraint and form validation for `firstName` max length 6 (validate based on trimmed value)",
    "Add/adjust backend and frontend tests to cover the new rule, including trimming and whitespace-only cases",
    "Ensure backend validation errors are handled/displayed appropriately in the registration UI"
  ],
  "outOfScope": [
    "Changing database storage schema or migrating existing student records",
    "Adding new fields to student registration",
    "Implementing authentication/authorization changes",
    "Changing student list page behavior (`/students`) beyond any incidental type/validation updates"
  ],
  "suggestedFileChanges": [
    {
      "path": "backend/src/schemas/student.schema.ts",
      "rationale": "Trim `firstName` and add `.min(1, ...)` and `.max(6, ...)` constraints in the Zod schema so backend enforces the rule based on trimmed value."
    },
    {
      "path": "backend/src/api/**",
      "rationale": "If API handlers do not already validate with StudentSchema, ensure create/update routes use the schema and return proper 4xx errors on validation failure."
    },
    {
      "path": "backend/src/schemas/student.schema.test.ts",
      "rationale": "Add vitest coverage for firstName trimming + max length validation (valid 6, invalid 7, whitespace-only invalid)."
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/**",
      "rationale": "Apply `maxLength={6}` to the firstName input and add form-level validation + error display that validates based on trimmed value (including paste)."
    },
    {
      "path": "frontend/src/lib/validators.ts",
      "rationale": "If the form uses shared validators, add/update a reusable validator that trims and enforces max length 6 for firstName."
    },
    {
      "path": "frontend/src/components/business/StudentRegistrationForm/**/*.test.tsx",
      "rationale": "Add React Testing Library tests for maxLength attribute, paste/typing behavior, trimming behavior, whitespace-only invalid, error message, and submit blocking."
    }
  ],
  "promptForAider": "## Task: Student registration `firstName` max 6 chars (frontend + backend)\n\n### Requirements\n- Enforce **max 6 characters** for `firstName` **after trimming leading/trailing spaces**.\n- Apply validation in **both frontend and backend**.\n- Error message copy can be any clear message.\n\n### Backend changes\n- File: `backend/src/schemas/student.schema.ts`\n  - Update `firstName` to trim then validate: required (min 1) and max 6.\n  - Example approach: `z.string().trim().min(1, ...).max(6, ...)`.\n- Ensure create/update student API handlers validate with this schema and reject invalid payloads before DB writes.\n\n### Frontend changes\n- Files: `frontend/src/app/students/new/page.tsx`, `frontend/src/components/business/StudentRegistrationForm/**`\n  - Add `maxLength={6}` to the First Name input.\n  - Add form-level validation that checks **trimmed** value length and blocks submit; must catch paste cases (donâ€™t rely only on `maxLength`).\n  - Surface backend validation errors if returned.\n- If shared validators are used, update/add in `frontend/src/lib/validators.ts`.\n\n### Validations to cover\n- `firstName` trimmed before length check\n- After trimming: length 1..6 valid; whitespace-only invalid; 7+ invalid\n- Frontend blocks submit and shows error; backend rejects invalid requests\n\n### Tests (no mocks)\n- Backend vitest (`backend/src/schemas/student.schema.test.ts`):\n  - accepts 1..6 after trimming\n  - rejects whitespace-only\n  - rejects 7+ after trimming\n  - trims values like \" Bob \"\n- Backend API test (if present): POST with invalid firstName returns 4xx and does not create record\n- Frontend RTL (`frontend/src/components/business/StudentRegistrationForm/**/*.test.tsx`):\n  - input has `maxLength=6`\n  - paste/type 7 chars shows error + blocks submit\n  - whitespace-only shows required error + blocks submit\n  - leading/trailing spaces validated based on trimmed value\n\n### Notes\n- Follow repo conventions: arrow functions, consolidated exports, kebab-case filenames, no mocking in tests.\n- Keep changes minimal; no new dependencies.\n"
}