{
  "taskId": 2,
  "name": "make street address non mandatory in registration page",
  "createdAt": "2025-12-23T11:52:05.000Z",
  "updatedAt": "2025-12-23T12:03:06.000Z",
  "allAssignees": [
    "PrasanKumar93"
  ],
  "assignee": "PrasanKumar93",
  "taskStatus": "TODO",
  "taskCategory": "",
  "priority": "",
  "llmTaskExplanation": "This is a legitimate software development task: update the user registration page so the Street Address field is optional (non-mandatory) instead of required.\n\nImplement the change end-to-end:\n- Frontend registration form: remove the required indicator/asterisk for Street Address, update form validation rules so submission is allowed when Street Address is empty, and ensure any inline error message for missing Street Address is removed.\n- Backend/API validation (if present): update request validation/schema so street address is not required. Ensure the backend accepts empty/omitted street address without returning validation errors.\n- Data persistence: ensure saving a user with a null/empty street address works (no DB constraint violations). If the DB column is currently NOT NULL, add a migration to allow NULL.\n- UX: keep the field visible (unless product wants it removed), but clearly optional (e.g., label “Street address (optional)”).\n\nAider should locate the registration page component(s), any shared address form component, and the registration endpoint validation to apply consistent optionality across client/server.",
  "validations": [
    "Registration form allows submission when Street Address is empty or omitted.",
    "If Street Address is provided, it must still pass existing formatting constraints (e.g., max length, allowed characters) as currently implemented.",
    "Street Address field should not show a “required” UI indicator (asterisk) and should not trigger “required” error messaging on blur/submit.",
    "Backend registration endpoint does not reject requests missing Street Address (no 400/422 for missing field).",
    "If backend trims input, whitespace-only Street Address is treated as empty (and accepted).",
    "Persisted user record can store Street Address as NULL/empty string without errors.",
    "Any downstream flows that display address (profile, order checkout, etc.) handle missing Street Address gracefully (no crashes, no 'undefined' rendering)."
  ],
  "unitTests": [
    "Frontend: submitting registration with Street Address empty succeeds (form validation passes and submit handler called).",
    "Frontend: Street Address field does not render required indicator and does not show required error on submit.",
    "Frontend: whitespace-only Street Address is treated as empty (if client-side trimming exists) and does not block submission.",
    "Backend: registration request without Street Address returns success (200/201) and creates user.",
    "Backend: registration request with Street Address present still validates per existing rules (e.g., max length) and rejects invalid values if applicable.",
    "Persistence: creating user with null/undefined Street Address does not throw and stores null/empty as expected.",
    "Regression: any serializer/DTO mapping does not throw when Street Address is missing."
  ],
  "acceptanceCriteria": [
    "Given I am on the registration page, when I leave Street Address blank and submit valid required fields, then registration succeeds.",
    "Given I am on the registration page, when I focus/blur or submit with Street Address blank, then I do not see a “Street Address is required” error.",
    "Given I submit registration without Street Address, when the backend processes the request, then it does not return a validation error for missing Street Address.",
    "Given a user registers without Street Address, when viewing any page that displays the address, then the UI renders gracefully (no crash and no literal 'undefined')."
  ],
  "technicalDependencies": [
    "Use existing form validation library already in the repo (e.g., React Hook Form + Yup/Zod, Formik, etc.)—do not introduce a new one.",
    "Use existing backend validation mechanism already in the repo (e.g., Joi/Zod/class-validator/JSON schema) and update the schema accordingly.",
    "If DB migration tooling exists (e.g., Prisma migrations, TypeORM, Sequelize, Rails ActiveRecord), use it to relax NOT NULL constraint if needed."
  ],
  "security": [
    "Do not log full address fields at info level; treat address as PII and keep logs minimal/redacted.",
    "Maintain existing server-side input sanitization/validation for Street Address when provided (prevent injection via stored strings).",
    "Ensure authorization is unchanged (registration remains public if it already is; no new auth bypasses introduced)."
  ],
  "performance": [
    "No measurable impact expected; avoid adding heavy new validation dependencies or increasing bundle size.",
    "Keep validation changes minimal to avoid extra re-renders or expensive schema recomputation on each keystroke."
  ],
  "businessContext": "Making Street Address optional reduces friction during sign-up and can improve conversion. Address can be collected later (e.g., profile completion, checkout) if needed. The field should remain available for users who want to provide it, but it must not block registration.",
  "otherNotes": "If the product requires address for certain features later (shipping, compliance), consider adding a post-registration prompt or profile completeness banner (out of scope unless requested). Ensure i18n strings (labels/errors) are updated if the app is localized. Ensure accessibility: label should indicate optionality in text, not only via styling.",
  "llmAssumptions": [
    {
      "assumption": "There is a dedicated registration page/form with a Street Address input currently marked required."
    },
    {
      "assumption": "There is server-side validation for registration payload that currently requires Street Address."
    },
    {
      "assumption": "Street Address is stored in a user profile table/collection and may currently be non-nullable."
    },
    {
      "assumption": "The desired change is to keep the field present but optional (not to remove it entirely)."
    }
  ],
  "llmOpenQuestions": [
    {
      "question": "Should the Street Address field remain visible on the registration page but labeled as optional, or should it be removed from registration entirely?",
      "answer":"keep the field, just make value optional"
    },
    {
      "question": "If a user enters only whitespace for Street Address, should it be stored as empty/NULL (preferred) or preserved as-is?",
      "answer":"preserve as it is"
    },
    {
      "question": "Are there any business flows that must still require Street Address at registration for specific user types/regions (e.g., B2B accounts), or is it optional for everyone?",
      "answer":"no"
    }
  ],
  "llmFileReferences": [],
  "inScope": [
    "Make Street Address optional on the registration UI (no required validation).",
    "Update backend validation to accept missing/empty Street Address.",
    "Update persistence constraints/migrations if Street Address is currently NOT NULL.",
    "Add/adjust unit tests to cover optional Street Address behavior."
  ],
  "outOfScope": [
    "Redesigning the entire registration flow or adding new steps.",
    "Collecting address later via new UX flows (profile completion prompts).",
    "Changing other address fields (city/state/zip) unless they are coupled to Street Address requiredness.",
    "Adding new third-party address validation/autocomplete services."
  ],
  "suggestedFileChanges": [
    {
      "path": "src/pages/Register.tsx",
      "rationale": "Likely contains the registration form UI and client-side validation rules; update Street Address to optional."
    },
    {
      "path": "src/components/RegistrationForm.tsx",
      "rationale": "If the form is extracted into a component, update field label, required indicator, and validation."
    },
    {
      "path": "src/validation/registerSchema.ts",
      "rationale": "If a shared schema (Yup/Zod/etc.) exists, update Street Address from required() to optional()/nullable()."
    },
    {
      "path": "server/routes/auth.ts",
      "rationale": "Registration endpoint may validate request body; ensure Street Address is not required."
    },
    {
      "path": "server/validation/register.ts",
      "rationale": "Backend request validation schema likely lives here; relax requirement for Street Address."
    },
    {
      "path": "server/models/User.ts",
      "rationale": "User model may define Street Address as required/non-null; update to optional/nullable."
    },
    {
      "path": "server/migrations/*",
      "rationale": "If DB column is NOT NULL, add migration to allow NULL for street_address."
    },
    {
      "path": "src/pages/__tests__/Register.test.tsx",
      "rationale": "Add/adjust frontend tests to ensure Street Address is optional."
    },
    {
      "path": "server/__tests__/auth.register.test.ts",
      "rationale": "Add/adjust backend tests to ensure registration succeeds without Street Address."
    }
  ],
  "promptForAider": "## Goal\nMake **Street Address** non-mandatory on the **registration page** and ensure the backend accepts registration without it.\n\n## Requirements\n- Update the registration UI so Street Address is **optional**:\n  - Remove required indicator/asterisk\n  - Remove/adjust client-side validation so blank is allowed\n  - Prefer label text like `Street address (optional)` if consistent with existing UX\n- Update backend registration validation so `streetAddress` (or equivalent) is **not required**.\n- Ensure persistence supports missing street address:\n  - If DB column is NOT NULL, add a migration to allow NULL.\n  - Treat whitespace-only as empty if trimming exists.\n\n## Validations / Edge cases\n- Registration succeeds when Street Address is omitted/empty.\n- If provided, Street Address still respects existing constraints (max length, etc.).\n- No UI shows “Street Address is required”.\n- No downstream UI renders `undefined` or crashes when address is missing.\n\n## Tests to add/update\n- Frontend test: submit registration with Street Address empty -> submit handler called / success path.\n- Frontend test: no required indicator and no required error for Street Address.\n- Backend test: register without Street Address -> 200/201.\n- Backend test: invalid Street Address (if rules exist) still rejected.\n\n## Security/PII\n- Don’t add verbose logging of address fields; keep PII out of logs.\n\n## Implementation notes\n- Reuse existing form + validation libraries; do not add new dependencies.\n- Search for registration form component, shared address components, and register request schema; make changes consistently across client/server.\n\nPlease implement the changes and update/add the tests accordingly."
}
