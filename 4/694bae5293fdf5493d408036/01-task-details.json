{
  "taskId": 4,
  "name": "[TASK]: Make street address non mandatory field in registration page",
  "createdAt": "2025-12-24T09:10:02.000Z",
  "updatedAt": "2025-12-24T09:10:13.000Z",
  "allAssignees": [
    "PrasanKumar93"
  ],
  "assignee": "PrasanKumar93",
  "description": "### Task explanation\n\nMake street address non mandatory field in registration page\n\n### Task validations\n\n_No response_\n\n### Unit Test Cases\n\n_No response_\n\n### Task acceptance criteria\n\n- street address must allow empty value during submit/ creating student\n\n### Task context files\n\n_No response_\n\n### Tech / Package Dependencies\n\n_No response_\n\n### Security & Performance\n\n_No response_\n\n### Other business context\n\n_No response_\n\n### Other notes\n\n_No response_\n\n### Checklist\n\n- [ ] Task documentation required\n- [ ] Task deployment required\n\n### Final Confirmation\n\n- [ ] I confirm the spec is correct and ready for development. (Good context now means less time spent in code review later :)",
  "taskStatus": "TODO",
  "taskCategory": "",
  "priority": "",
  "llmTaskExplanation": "Update the student registration and student update/edit flows so that the Street Address field is optional (non-mandatory) everywhere. This requires changes in: (1) UI/form validation so Street Address is not marked required and does not block submission when empty/missing; (2) API/request validation so backend accepts missing/empty street address without validation errors; and (3) persistence/model layer so the street address column/property allows null/empty values (and any DB constraints are updated via migration if needed). Preserve existing behavior for other required fields, and keep saving/returning Street Address when provided. Per requirement, whitespace-only values should be preserved as-is (no trimming/normalization changes introduced).",
  "validations": [
    "Registration form: Street Address is optional; form submission must succeed when Street Address is empty, null, or omitted.",
    "Edit/Update student form: Street Address is optional; saving must succeed when Street Address is empty, null, or omitted.",
    "UI: Street Address must not show a required indicator (e.g., asterisk) and must not set aria-required=true (if used).",
    "If Street Address is provided, it must still pass any existing formatting/length validations (e.g., max length) without being loosened unintentionally.",
    "Backend/API: Create-student endpoint must accept requests where streetAddress is missing or an empty string; it must not return a 400/422 solely due to missing street address.",
    "Backend/API: Update-student endpoint must accept requests where streetAddress is missing or an empty string; it must not return a 400/422 solely due to missing street address.",
    "Backend/API: If street address is provided (including whitespace-only), it must be persisted and returned consistently in any create/update response or subsequent fetch (if applicable).",
    "Database/model: Street address storage must allow NULL (or empty string per existing conventions) and must not violate NOT NULL constraints during insert/update.",
    "Whitespace-only street address must be preserved as-is (do not trim/normalize to empty/null as part of this change).",
    "Regression: Other required registration/update fields remain required and continue to block submission when missing/invalid."
  ],
  "unitTests": [
    "Frontend registration form validation test: submitting registration with Street Address empty does not show a 'required' error and triggers submit handler/API call.",
    "Frontend registration UI test: Street Address field is not rendered with required indicator/aria-required (if the UI uses such markers).",
    "Frontend edit/update form validation test: saving student with Street Address empty does not show a 'required' error and triggers save handler/API call.",
    "Backend validation test: create-student request without streetAddress field returns success (201/200) and creates student.",
    "Backend validation test: create-student request with streetAddress: \"\" returns success and creates student (or stores empty string per conventions).",
    "Backend validation test: update-student request omitting streetAddress returns success and does not fail validation due to streetAddress.",
    "Backend validation test: update-student request with streetAddress: \"\" returns success and updates/clears value per conventions.",
    "Backend persistence test: create/update with a non-empty streetAddress persists the value and can be retrieved/returned correctly.",
    "Backend persistence test: create/update with whitespace-only streetAddress (e.g., \"   \") preserves the exact value (no trimming) and can be retrieved/returned correctly.",
    "Model/DB constraint test (if applicable in repo): migration/schema allows null for street address; inserting/updating a student with null street address does not throw.",
    "Regression test: create-student request missing another required field still fails with expected validation error.",
    "Regression test: update-student request missing another required field (if applicable) still fails with expected validation error."
  ],
  "acceptanceCriteria": [
    "Given I am on the registration page, when I leave Street Address blank and submit, then the student is created successfully.",
    "Given I am editing a student, when I clear Street Address and save, then the student is updated successfully.",
    "Given I leave Street Address blank on registration or edit, then no validation error is shown for Street Address and the submit/save is not blocked.",
    "Given I submit registration or update with a Street Address value (including whitespace-only), then the value is saved and visible wherever student address is displayed/returned (if applicable).",
    "Given I submit registration or update missing other required fields, when I submit/save, then I still see validation errors and the student is not created/updated."
  ],
  "technicalDependencies": [
    "Use existing form validation library/pattern already in the repo (e.g., React Hook Form + Yup/Zod, Formik, or custom validators).",
    "Use existing backend validation mechanism already in the repo (e.g., DTO validation, Joi/Zod, Rails validations, etc.).",
    "If DB schema enforces NOT NULL, add a migration using the projectâ€™s existing migration tool (e.g., Prisma/TypeORM/Sequelize/Rails/Liquibase/Flyway)."
  ],
  "security": [
    "Treat street address as PII: avoid adding new logs that print full address values.",
    "Ensure create/update student endpoint authorization/authentication remains unchanged; do not relax access controls while changing validation.",
    "Continue to sanitize/validate inputs to prevent injection (SQL/NoSQL) and XSS in any address display fields."
  ],
  "performance": [
    "No measurable performance impact expected; ensure no additional network calls are introduced.",
    "If adding a DB migration, ensure it is safe for production (non-blocking where possible) and does not require full table rewrite unless unavoidable."
  ],
  "businessContext": "The registration and student maintenance flows should not force users to provide a street address to create or update a student record. This supports cases where address is unknown, not applicable, or collected later. Other required student information should remain required to preserve data quality. There are no downstream business process concerns requiring street address at a later step.",
  "otherNotes": "Apply optional Street Address consistently across all flows (registration + edit/update) to avoid mismatched validation. Do not introduce new trimming/normalization behavior: whitespace-only streetAddress values should be preserved as entered. If the UI currently shows a required asterisk or helper text for Street Address, update it to reflect optional status. Add/adjust DB migration only if the column is currently NOT NULL. Update any API docs or inline comments if they explicitly state street address is required.",
  "llmAssumptions": [
    {
      "assumption": "Street Address must be optional in all student flows (registration and edit/update), not just initial registration."
    },
    {
      "assumption": "Whitespace-only Street Address values should be preserved as entered; no trimming/normalization changes are desired for this task."
    },
    {
      "assumption": "There is a registration page used to create a student record, and it includes a Street Address input currently marked required."
    },
    {
      "assumption": "There is backend-side validation that currently rejects missing/empty street address during student creation and possibly update."
    },
    {
      "assumption": "Street address is stored in a database field that may currently be NOT NULL; a migration may be required depending on current schema."
    },
    {
      "assumption": "The system has automated tests and a standard way to test frontend forms and backend endpoints."
    }
  ],
  "llmOpenQuestions": [],
  "llmFileReferences": [],
  "inScope": [
    "Make Street Address optional on the registration UI (no required validation/indicator).",
    "Make Street Address optional on any edit/update student UI (no required validation/indicator).",
    "Allow create-student submission when Street Address is empty/missing.",
    "Allow update-student submission when Street Address is empty/missing.",
    "Update backend validation to accept empty/missing street address on create and update.",
    "Update persistence/schema constraints if they currently require street address.",
    "Add/adjust unit tests to cover optional street address behavior (create + update) and regressions.",
    "Ensure whitespace-only streetAddress values are preserved (no trimming introduced by this change)."
  ],
  "outOfScope": [
    "Changing requirements for other address fields (city/state/zip) unless they are coupled and currently blocked by street address changes.",
    "Redesigning the registration/edit pages beyond required/optional indicators and related helper text.",
    "Adding new address verification, geocoding, or third-party address services.",
    "Bulk backfilling or modifying existing student address data."
  ],
  "suggestedFileChanges": [
    {
      "path": "src/pages/Registration.*",
      "rationale": "Update the registration page form to remove required validation/indicator for Street Address and ensure submit works when empty."
    },
    {
      "path": "src/components/forms/StudentRegistrationForm.*",
      "rationale": "If the form is componentized, update field-level validation rules and required markers for Street Address."
    },
    {
      "path": "src/pages/**/EditStudent.*",
      "rationale": "Update any student edit/update page to remove required validation/indicator for Street Address and ensure save works when empty."
    },
    {
      "path": "src/components/forms/StudentEditForm.*",
      "rationale": "If the edit form is componentized, update field-level validation rules and required markers for Street Address."
    },
    {
      "path": "src/validation/*student*.*",
      "rationale": "Adjust shared validation schema to make streetAddress optional for both create and update flows; do not add trimming for whitespace-only values."
    },
    {
      "path": "server/routes/*student*.*",
      "rationale": "Ensure create-student and update-student routes/controllers accept missing/empty streetAddress and do not reject the request."
    },
    {
      "path": "server/validators/*student*.*",
      "rationale": "Update backend DTO/schema validation to mark streetAddress optional for create and update; ensure whitespace-only is not normalized."
    },
    {
      "path": "server/models/*Student*.*",
      "rationale": "Ensure model allows null/empty streetAddress and does not enforce presence validation on create/update."
    },
    {
      "path": "migrations/*",
      "rationale": "If DB column is NOT NULL, add a migration to allow NULL for street address."
    },
    {
      "path": "tests/**/*registration*.*",
      "rationale": "Add/adjust frontend tests ensuring Street Address is optional on registration and submission succeeds."
    },
    {
      "path": "tests/**/*student*edit*.*",
      "rationale": "Add/adjust frontend tests ensuring Street Address is optional on edit/update and save succeeds."
    },
    {
      "path": "tests/**/*student*create*.*",
      "rationale": "Add/adjust backend tests ensuring create-student works without streetAddress and still fails for other missing required fields."
    },
    {
      "path": "tests/**/*student*update*.*",
      "rationale": "Add/adjust backend tests ensuring update-student works without streetAddress and still fails for other missing required fields."
    }
  ],
  "promptForAider": "## Task: Make Street Address optional in all student flows (registration + edit/update)\n\n### Goal\nMake `streetAddress` **non-mandatory everywhere** (create + update). Users must be able to submit/save with `streetAddress` missing, null, or empty string.\n\n### Key requirements\n- UI (registration + edit): remove required validation and required indicator/aria-required for Street Address.\n- Backend (create + update): validation must not reject missing/empty `streetAddress`.\n- Persistence: ensure DB/model allows NULL/empty; add migration only if NOT NULL exists.\n- IMPORTANT: **Do not introduce trimming/normalization**. Whitespace-only values (e.g., \"   \") must be preserved as entered.\n- Regression: other required fields remain required.\n\n### Suggested areas to change\n- `src/pages/Registration.*`\n- `src/components/forms/StudentRegistrationForm.*`\n- `src/pages/**/EditStudent.*`\n- `src/components/forms/StudentEditForm.*`\n- `src/validation/*student*.*`\n- `server/routes/*student*.*`\n- `server/validators/*student*.*`\n- `server/models/*Student*.*`\n- `migrations/*` (only if needed)\n\n### Validations to ensure\n- Create and update succeed when `streetAddress` is omitted or \"\".\n- If provided, existing length/format constraints still apply.\n- Whitespace-only is accepted and stored exactly (no trim).\n\n### Tests to add/update\n- Frontend: registration submit with empty Street Address succeeds; no required error/indicator.\n- Frontend: edit/update save with empty Street Address succeeds; no required error/indicator.\n- Backend: create without `streetAddress` succeeds; create with `streetAddress: \"\"` succeeds.\n- Backend: update omitting `streetAddress` succeeds; update with `streetAddress: \"\"` succeeds.\n- Backend: whitespace-only `streetAddress` is preserved (no trimming).\n- Regression: missing other required fields still fails.\n\n### Security/PII\n- Do not add logs that print full street address.\n- Do not change auth/authz behavior.\n"
}