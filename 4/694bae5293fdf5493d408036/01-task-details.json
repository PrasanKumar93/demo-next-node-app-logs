{
  "taskId": 4,
  "name": "[TASK]: Make street address non mandatory field in registration page",
  "createdAt": "2025-12-24T09:10:02.000Z",
  "updatedAt": "2025-12-24T09:10:13.000Z",
  "allAssignees": [
    "PrasanKumar93"
  ],
  "assignee": "PrasanKumar93",
  "description": "### Task explanation\n\nMake street address non mandatory field in registration page\n\n### Task validations\n\n_No response_\n\n### Unit Test Cases\n\n_No response_\n\n### Task acceptance criteria\n\n- street address must allow empty value during submit/ creating student\n\n### Task context files\n\n_No response_\n\n### Tech / Package Dependencies\n\n_No response_\n\n### Security & Performance\n\n_No response_\n\n### Other business context\n\n_No response_\n\n### Other notes\n\n_No response_\n\n### Checklist\n\n- [ ] Task documentation required\n- [ ] Task deployment required\n\n### Final Confirmation\n\n- [ ] I confirm the spec is correct and ready for development. (Good context now means less time spent in code review later :)",
  "taskStatus": "TODO",
  "taskCategory": "",
  "priority": "",
  "llmTaskExplanation": "Update the student registration flow so that the Street Address field is optional (non-mandatory) when creating a student. This typically requires changes in three layers: (1) UI/form validation on the registration page so the field is not marked required and does not block submission when empty; (2) API/request validation so the backend accepts missing/empty street address without returning validation errors; and (3) persistence/model layer so the street address column/property allows null/empty values (and any DB constraints are updated via migration if needed). Ensure existing behavior remains unchanged for other required fields, and that providing a street address still saves correctly.",
  "validations": [
    "Registration form: Street Address is optional; form submission must succeed when Street Address is empty, null, or omitted.",
    "Registration form: If Street Address is provided, it must still pass any existing formatting/length validations (e.g., max length) without being loosened unintentionally.",
    "Backend/API: Create-student endpoint must accept requests where street address is missing or an empty string; it must not return a 400/422 solely due to missing street address.",
    "Backend/API: If street address is provided, it must be persisted and returned consistently in any create response or subsequent fetch (if applicable).",
    "Database/model: Street address storage must allow NULL (or empty string per existing conventions) and must not violate NOT NULL constraints during insert/update.",
    "Edge case: Submitting whitespace-only street address should be treated as empty (trim) if the system already trims inputs; otherwise it should not cause validation failure.",
    "Regression: Other required registration fields remain required and continue to block submission when missing/invalid."
  ],
  "unitTests": [
    "Frontend form validation test: submitting registration with Street Address empty does not show a 'required' error and triggers submit handler/API call.",
    "Frontend form validation test: Street Address field is not rendered with required indicator/aria-required (if the UI uses such markers).",
    "Backend validation test: create-student request without streetAddress field returns success (201/200) and creates student.",
    "Backend validation test: create-student request with streetAddress: \"\" returns success and creates student (or normalizes to null per conventions).",
    "Backend persistence test: create-student request with a non-empty streetAddress persists the value and can be retrieved/returned correctly.",
    "Model/DB constraint test (if applicable in repo): migration/schema allows null for street address; inserting a student with null street address does not throw.",
    "Regression test: create-student request missing another required field still fails with expected validation error."
  ],
  "acceptanceCriteria": [
    "Given I am on the registration page, when I leave Street Address blank and submit, then the student is created successfully.",
    "Given I submit registration with Street Address blank, then no validation error is shown for Street Address and the submit is not blocked.",
    "Given I submit registration with a Street Address value, then the value is saved and visible wherever student address is displayed/returned (if applicable).",
    "Given I submit registration missing other required fields, when I submit, then I still see validation errors and the student is not created."
  ],
  "technicalDependencies": [
    "Use existing form validation library/pattern already in the repo (e.g., React Hook Form + Yup/Zod, Formik, or custom validators).",
    "Use existing backend validation mechanism already in the repo (e.g., DTO validation, Joi/Zod, Rails validations, etc.).",
    "If DB schema enforces NOT NULL, add a migration using the project’s existing migration tool (e.g., Prisma/TypeORM/Sequelize/Rails/Liquibase/Flyway)."
  ],
  "security": [
    "Treat street address as PII: avoid adding new logs that print full address values.",
    "Ensure create-student endpoint authorization/authentication remains unchanged; do not relax access controls while changing validation.",
    "Continue to sanitize/validate inputs to prevent injection (SQL/NoSQL) and XSS in any address display fields."
  ],
  "performance": [
    "No measurable performance impact expected; ensure no additional network calls are introduced.",
    "If adding a DB migration, ensure it is safe for production (non-blocking where possible) and does not require full table rewrite unless unavoidable."
  ],
  "businessContext": "The registration flow should not force users to provide a street address to create a student record. This supports cases where address is unknown, not applicable, or collected later. Other required registration information should remain required to preserve data quality.",
  "otherNotes": "If the UI currently shows a required asterisk or helper text for Street Address, update it to reflect optional status. If the backend normalizes empty strings to null, keep behavior consistent across create and update flows. Consider also updating any edit-student form validation to match (optional) to avoid inconsistency. Add/adjust DB migration only if the column is currently NOT NULL. Update any API docs or inline comments if they explicitly state street address is required.",
  "llmAssumptions": [
    {
      "assumption": "There is a registration page used to create a student record, and it includes a Street Address input currently marked required."
    },
    {
      "assumption": "There is backend-side validation that currently rejects missing/empty street address during student creation."
    },
    {
      "assumption": "Street address is stored in a database field that may currently be NOT NULL; a migration may be required depending on current schema."
    },
    {
      "assumption": "The system has automated tests and a standard way to test frontend forms and backend endpoints."
    }
  ],
  "llmOpenQuestions": [
    {
      "question": "Should Street Address be optional only on initial registration, or also optional on any subsequent edit/update student flows?"
    },
    {
      "question": "When a user enters only whitespace for Street Address, should the system trim and store it as empty/null, or preserve as-is?"
    },
    {
      "question": "Are there any downstream business processes (e.g., billing, shipping, reporting) that require street address at a later step, and should we add any UI messaging like 'optional (can be added later)'?"
    }
  ],
  "llmFileReferences": [],
  "inScope": [
    "Make Street Address optional on the registration UI (no required validation).",
    "Allow create-student submission when Street Address is empty/missing.",
    "Update backend validation to accept empty/missing street address.",
    "Update persistence/schema constraints if they currently require street address.",
    "Add/adjust unit tests to cover optional street address behavior and regressions."
  ],
  "outOfScope": [
    "Changing requirements for other address fields (city/state/zip) unless they are coupled and currently blocked by street address changes.",
    "Redesigning the registration page UI beyond required/optional indicators and related helper text.",
    "Adding new address verification, geocoding, or third-party address services.",
    "Bulk backfilling or modifying existing student address data."
  ],
  "suggestedFileChanges": [
    {
      "path": "src/pages/Registration.*",
      "rationale": "Update the registration page form to remove required validation/indicator for Street Address and ensure submit works when empty."
    },
    {
      "path": "src/components/forms/StudentRegistrationForm.*",
      "rationale": "If the form is componentized, update field-level validation rules and required markers for Street Address."
    },
    {
      "path": "src/validation/*student*.*",
      "rationale": "Adjust shared validation schema (Yup/Zod/custom) to make streetAddress optional."
    },
    {
      "path": "server/routes/*student*.*",
      "rationale": "Ensure create-student route/controller accepts missing/empty streetAddress and does not reject the request."
    },
    {
      "path": "server/validators/*student*.*",
      "rationale": "Update backend DTO/schema validation to mark streetAddress optional and handle empty string normalization if applicable."
    },
    {
      "path": "server/models/*Student*.*",
      "rationale": "Ensure model allows null/empty streetAddress and does not enforce presence validation."
    },
    {
      "path": "migrations/*",
      "rationale": "If DB column is NOT NULL, add a migration to allow NULL for street address."
    },
    {
      "path": "tests/**/*registration*.*",
      "rationale": "Add/adjust frontend tests ensuring Street Address is optional and submission succeeds."
    },
    {
      "path": "tests/**/*student*create*.*",
      "rationale": "Add/adjust backend tests ensuring create-student works without streetAddress and still fails for other missing required fields."
    }
  ],
  "promptForAider": "## Task: Make Street Address optional on student registration\n\nUpdate the student registration flow so **Street Address is not mandatory** when creating a student.\n\n### Requirements\n- UI: Remove required validation/required indicator for Street Address on the registration form.\n- Backend: Create-student must accept `streetAddress` when **missing**, **null**, or **empty string** (normalize/trim per existing conventions).\n- Persistence: Ensure DB/model allows null/empty street address; add a migration only if a NOT NULL constraint exists.\n- Regression: Other required fields must remain required.\n\n### Validations to implement\n- Submission succeeds with Street Address empty/missing.\n- If Street Address is provided, existing length/format constraints still apply.\n- Whitespace-only address should be treated as empty if the codebase trims inputs.\n\n### Tests to add/update\n- Frontend: submitting with empty Street Address does not show required error and calls submit.\n- Backend: create-student without `streetAddress` succeeds; with `streetAddress: \"\"` succeeds.\n- Backend regression: missing another required field still fails.\n\n### Security/PII\n- Do not add logs that print full street address.\n- Do not change authz/authn behavior.\n\n### Checklist\n- Add/adjust unit tests.\n- If a migration is needed, include it and ensure it’s safe.\n"
}